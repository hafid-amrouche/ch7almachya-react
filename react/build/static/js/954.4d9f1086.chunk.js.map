{"version":3,"file":"static/js/954.4d9f1086.chunk.js","mappings":"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","sources":["Screens/settings/ProfileScreen/UserInfo.js"],"sourcesContent":["import React, { useContext, useEffect, useRef, useState } from 'react'\r\nimport { UserContext } from '../../../store/UserContext'\r\nimport { BrowserContext } from '../../../store/BrowserContext'\r\nimport axios from 'axios'\r\nimport { Message } from '../../../Components/Message'\r\nimport { Loader } from '../../../Components/Loader'\r\nimport { TranslationContext } from '../../../store/TranslationContext'\r\n\r\nconst UserInfo = () => {\r\n    const {userData, setUserData} = useContext(UserContext)\r\n\r\n    const config = {\r\n      headers : {\r\n        \"Content-Type\": \"multipart/form-data\",\r\n        Authorization: `Bearer ${userData.token}`\r\n      }\r\n    }\r\n    const [first_name, setFirstName] =  useState(userData.profile.first_name)\r\n    const [last_name, setLastName] =  useState(userData.profile.last_name)\r\n  \r\n    const [is_male, setIsMale] = useState(userData.profile.is_male) \r\n    const [birth_day, setBirthDay] = useState(userData.profile.birth_day)\r\n    const [birth_day_public, setBirthDayPublic] = useState(userData.profile.birth_day_public)\r\n    const [loading, setLoading] = useState(false)\r\n    const [error, setError] = useState(false)\r\n    const isDisabled = useRef(false)\r\n\r\n    const updateProfile = async(e)=>{\r\n        e.preventDefault()\r\n        setLoading(true)\r\n        try {\r\n          const {data} = await axios.put(\r\n            '/api/settings/update-profile/',\r\n            {\r\n              first_name : first_name.trim(),\r\n              last_name : last_name.trim(),\r\n              birth_day : birth_day,\r\n              birth_day_public: birth_day_public,\r\n              is_male: is_male,\r\n            },\r\n            config) \r\n          const newData = { ...userData, ...data}\r\n          setUserData(newData)\r\n          localStorage.setItem('userData', JSON.stringify(newData))  \r\n          setLoading(false)\r\n          setError(null)\r\n          \r\n        }catch(error){\r\n          setLoading(false)\r\n          setError(error)\r\n          console.log(error)\r\n        }\r\n        \r\n      }\r\n      isDisabled.current = first_name.trim() == '' || last_name.trim() == '' || \r\n      (\r\n      first_name.trim() == userData.profile.first_name && \r\n      last_name.trim() == userData.profile.last_name && \r\n      birth_day == userData.profile.birth_day &&\r\n      birth_day_public == userData.profile.birth_day_public &&\r\n      is_male == userData.profile.is_male\r\n\r\n      )\r\n    const {translate} = useContext(TranslationContext)\r\n    return (\r\n    <div className=\"p-2\">\r\n      <div className=\"card d-flex flex-column p-3\">\r\n        <div className='flex-grow-1'>\r\n          <div className=\"row\">\r\n            <h4 className='mb-3 color-theme'>{translate('Profile information')}</h4>\r\n            <div className=\"col-sm-6 col-12\">\r\n            <div className=\"form-group\">\r\n                <label htmlFor=\"fullName\">{translate('First Name')}</label>\r\n                <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                placeholder={translate('First Name')}\r\n                maxLength={50}\r\n                value={first_name}\r\n                onChange={(e)=>setFirstName(e.target.value)}\r\n                />\r\n            </div>\r\n            </div>\r\n            <div className=\"col-sm-6 col-12\">\r\n            <div className=\"form-group\">\r\n                <label htmlFor=\"fullName\">{translate('Last Name')}</label>\r\n                <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                placeholder={translate('Last Name')}\r\n                maxLength={50}\r\n                onChange={(e)=>setLastName(e.target.value)}\r\n                value={last_name}\r\n                />\r\n            </div>\r\n            </div>\r\n            <div className=\"col-sm-6 col-12\">\r\n            <div className='form-group'>\r\n                <label>{translate('Gender')}</label>\r\n                <select className='form-select' onChange={e=>setIsMale(e.target.value)} value={is_male}>\r\n                <option value={true}>{translate('Male')}</option>\r\n                    <option value={false}>{translate('Female')}</option>\r\n                </select>\r\n            </div>\r\n            </div>\r\n            <div className=\"col-12 d-flex flex-wrap justify-content-center mt-4\">\r\n            <div  className='align-items-center gap-3 d-flex col-sm-6 col-12 p-3'>{translate('Let people see your birth day')} <input type='checkBox' checked={birth_day_public} onChange={(e)=>{setBirthDayPublic(e.target.checked)}}/></div>\r\n            <div  className=\"form-group gap-2 d-flex col-sm-6 col-12 py-3\">\r\n                <label >{translate('Birthday')}</label>\r\n                <input type='date' value={birth_day || ''} onChange={(e)=>(setBirthDay(e.target.value))} className='form-control h-fit-content w-fit-content px-2'/>\r\n            </div>\r\n            </div>\r\n            {error && <Message removeAlert={()=> setError(null)} variant='danger' className='mt-3'>{error.response.data.detail || error.message}</Message>}\r\n            <div className=\"mt-3\">\r\n              <div className=\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\">\r\n                  <div className=\"d-flex flex-row-reverse\">\r\n                  <button\r\n                      type=\"button\"\r\n                      id=\"submit\"\r\n                      name=\"submit\"\r\n                      className=\"btn btn-success m-2 d-flex gap-2\"\r\n                      onClick={updateProfile}\r\n                      disabled={isDisabled.current || error || loading}\r\n                  >\r\n                      <span>{translate('Update Profile')}</span>\r\n                      { loading && <Loader diam={23}/>}\r\n                  </button>\r\n                  </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default UserInfo"],"names":["UserInfo","userData","setUserData","useContext","UserContext","config","headers","Authorization","concat","token","first_name","setFirstName","useState","profile","last_name","setLastName","is_male","setIsMale","birth_day","setBirthDay","birth_day_public","setBirthDayPublic","loading","setLoading","error","setError","isDisabled","useRef","current","trim","translate","TranslationContext","_jsx","className","children","_jsxs","htmlFor","type","placeholder","maxLength","value","onChange","e","target","checked","Message","removeAlert","variant","response","data","detail","message","id","name","onClick","async","preventDefault","axios","put","newData","localStorage","setItem","JSON","stringify","console","log","disabled","Loader","diam"],"sourceRoot":""}