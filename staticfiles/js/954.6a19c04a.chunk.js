"use strict";(self.webpackChunkfe=self.webpackChunkfe||[]).push([[954],{954:(e,a,l)=>{l.r(a),l.d(a,{default:()=>m});var s=l(2791),t=l(213),r=(l(2046),l(5294)),i=l(8592),c=l(2014),n=l(8255),o=l(184);const m=()=>{const{userData:e,setUserData:a}=(0,s.useContext)(t.S),l={headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(e.token)}},[m,d]=(0,s.useState)(e.profile.first_name),[h,u]=(0,s.useState)(e.profile.last_name),[p,x]=(0,s.useState)(e.profile.is_male),[f,j]=(0,s.useState)(e.profile.birth_day),[v,N]=(0,s.useState)(e.profile.birth_day_public),[g,b]=(0,s.useState)(!1),[y,_]=(0,s.useState)(!1),C=(0,s.useRef)(!1);C.current=""==m.trim()||""==h.trim()||m.trim()==e.profile.first_name&&h.trim()==e.profile.last_name&&f==e.profile.birth_day&&v==e.profile.birth_day_public&&p==e.profile.is_male;const{translate:S}=(0,s.useContext)(n.O);return(0,o.jsx)("div",{className:"p-2",children:(0,o.jsx)("div",{className:"card d-flex flex-column p-3",children:(0,o.jsx)("div",{className:"flex-grow-1",children:(0,o.jsxs)("div",{className:"row",children:[(0,o.jsx)("h4",{className:"mb-3 color-theme",children:S("Profile information")}),(0,o.jsx)("div",{className:"col-sm-6 col-12",children:(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"fullName",children:S("First Name")}),(0,o.jsx)("input",{type:"text",className:"form-control",placeholder:S("First Name"),maxLength:50,value:m,onChange:e=>d(e.target.value)})]})}),(0,o.jsx)("div",{className:"col-sm-6 col-12",children:(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"fullName",children:S("Last Name")}),(0,o.jsx)("input",{type:"text",className:"form-control",placeholder:S("Last Name"),maxLength:50,onChange:e=>u(e.target.value),value:h})]})}),(0,o.jsx)("div",{className:"col-sm-6 col-12",children:(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:S("Gender")}),(0,o.jsxs)("select",{className:"form-select",onChange:e=>x(e.target.value),value:p,children:[(0,o.jsx)("option",{value:!0,children:S("Male")}),(0,o.jsx)("option",{value:!1,children:S("Female")})]})]})}),(0,o.jsxs)("div",{className:"col-12 d-flex flex-wrap justify-content-center mt-4",children:[(0,o.jsxs)("div",{className:"align-items-center gap-3 d-flex col-sm-6 col-12 p-3",children:[S("Let people see your birth day")," ",(0,o.jsx)("input",{type:"checkBox",checked:v,onChange:e=>{N(e.target.checked)}})]}),(0,o.jsxs)("div",{className:"form-group gap-2 d-flex col-sm-6 col-12 py-3",children:[(0,o.jsx)("label",{children:S("Birthday")}),(0,o.jsx)("input",{type:"date",value:f||"",onChange:e=>j(e.target.value),className:"form-control h-fit-content w-fit-content px-2"})]})]}),y&&(0,o.jsx)(i.v,{removeAlert:()=>_(null),variant:"danger",className:"mt-3",children:y.response.data.detail||y.message}),(0,o.jsx)("div",{className:"mt-3",children:(0,o.jsx)("div",{className:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12",children:(0,o.jsx)("div",{className:"d-flex flex-row-reverse",children:(0,o.jsxs)("button",{type:"button",id:"submit",name:"submit",className:"btn btn-success m-2 d-flex gap-2",onClick:async s=>{s.preventDefault(),b(!0);try{const{data:s}=await r.Z.post("/api/settings/update-profile/",{first_name:m.trim(),last_name:h.trim(),birth_day:f,birth_day_public:v,is_male:p},l),t={...e,...s};a(t),localStorage.setItem("userData",JSON.stringify(t)),b(!1),_(null)}catch(y){b(!1),_(y),console.log(y)}},disabled:C.current||y||g,children:[(0,o.jsx)("span",{children:S("Update Profile")}),g&&(0,o.jsx)(c.a,{diam:23})]})})})})]})})})})}}}]);
//# sourceMappingURL=954.6a19c04a.chunk.js.map