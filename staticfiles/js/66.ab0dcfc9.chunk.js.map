{"version":3,"file":"static/js/66.ab0dcfc9.chunk.js","mappings":"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","sources":["Components/UI/AutoResizeTextarea.js","Screens/settings/ProfileScreen/AccountInfo.js"],"sourcesContent":["import React, { useState } from 'react';\r\n\r\nconst AutoResizeTextarea = ({rows, value, ...props}) => {\r\n\r\n\r\n  const calculateRows = () => {\r\n    // Count the number of lines in the textarea value\r\n    const lineCount = (value.match(/\\n/g) || []).length + 1;\r\n    // Set a minimum number_ of rows to ensure visibility\r\n    const minRows = rows;\r\n    const maxRows = 6; // Set your desired maximum number of rows\r\n\r\n    // Return a value within the specified range\r\n    return Math.min(Math.max(lineCount, minRows), maxRows);\r\n  };\r\n\r\n  return (\r\n    <textarea\r\n      rows={calculateRows()}\r\n      style={{ resize: 'none' }}\r\n      value={value}\r\n      {...props}\r\n    />\r\n  );\r\n};\r\n\r\nexport default AutoResizeTextarea;","import React, { useContext, useRef, useState } from 'react'\r\nimport { UserContext } from '../../../store/UserContext'\r\nimport axios from 'axios'\r\nimport AutoResizeTextarea from '../../../Components/UI/AutoResizeTextarea'\r\nimport { Message } from '../../../Components/Message'\r\nimport { Loader } from '../../../Components/Loader'\r\nimport {TranslationContext} from '../../../store/TranslationContext'\r\n\r\nconst AccountInfo = () => {\r\n    const {userData, setUserData} = useContext(UserContext)\r\n    const config = {\r\n      headers : {\r\n        \"Content-Type\": \"multipart/form-data\",\r\n        Authorization: `Bearer ${userData.token}`\r\n      }\r\n    }\r\n    \r\n    const [loading, setLoading] = useState(false)\r\n    const [error, setError] = useState(false)\r\n\r\n    const [bio, setBio] =  useState(userData.extention.bio)\r\n    const [email_public, setEmailPublic] = useState(userData.extention.email_public)\r\n  \r\n  \r\n    const [is_page, setIsPage] = useState(userData.extention.is_page)\r\n\r\n    \r\n      \r\n   \r\n\r\n    const updateProfile = async(e)=>{\r\n      e.preventDefault()\r\n      setLoading(true)\r\n      try {\r\n        const {data} = await axios.post(\r\n          '/api/settings/update-account/',\r\n          {\r\n            bio :bio.trim(),\r\n            email_public : email_public,\r\n            is_page : is_page,\r\n          },\r\n          config) \r\n        const newData = {\r\n          ...userData, \r\n          profile : data['profile'],\r\n          page : data['page'],\r\n          extention : {\r\n            ...userData.extention,\r\n            ...data['extention']\r\n          }\r\n        } \r\n        console.log(data)\r\n        setUserData(newData)\r\n        localStorage.setItem('userData', JSON.stringify(newData))  \r\n        setLoading(false)\r\n        setError(null)\r\n        \r\n      }catch(error){\r\n        setLoading(false)\r\n        setError(error)\r\n        console.log(error)\r\n      }\r\n      \r\n    }\r\n    const isDisabled = useRef(false)\r\n\r\n    isDisabled.current = (bio.trim() == userData.extention.bio) && \r\n      (is_page == userData.extention.is_page) && \r\n      (email_public == userData.extention.email_public) \r\n    \r\n  const {translate} = useContext(TranslationContext)\r\n  return (\r\n    <div className=\"p-2\">\r\n        <div className=\"card d-flex flex-column p-3\">\r\n            <div className=\"row\">      \r\n                <h4 className='color-theme'>{translate('Account information')}</h4>\r\n\r\n                <div className=\"about text-center p-3\">\r\n                    <h5 className=\"p-1\">{translate('Bio')}</h5>\r\n                    <AutoResizeTextarea className='form-control text-center' onChange={(e)=> setBio(e.target.value)} value={bio} rows={2} maxLength={255}></AutoResizeTextarea>\r\n                </div>\r\n                <div className=\"d-flex flex-wrap\">\r\n                <div  className='align-items-center gap-3 d-flex col-12 col-sm-6 p-3'><p className='mb-0'>{translate('Page account')}</p> <input type='checkBox' checked={is_page} onChange={(e)=>{setIsPage(e.target.checked)}}/></div>\r\n                </div>                  \r\n                {userData.extention.email_verified &&  \r\n                <>\r\n                    <div className=\"d-flex flex-wrap justify-content-center\">\r\n                        <div className='align-items-center gap-3 d-flex col-12 p-3'>{translate('Let people see your email')}<input type='checkBox' checked={email_public} onChange={(e)=>{setEmailPublic(e.target.checked)}}/></div>\r\n                    </div>\r\n                </>\r\n                }\r\n            </div>\r\n            {error && <Message removeAlert={()=> setError(null)} variant='danger' className='mt-3'>{error.response.data.detail || error.message}</Message>}\r\n            <div>\r\n                <div>\r\n                <div className=\"d-flex flex-row-reverse\">\r\n                    <button\r\n                    type=\"button\"\r\n                    id=\"submit\"\r\n                    name=\"submit\"\r\n                    className=\"btn btn-success m-2 d-flex gap-2\"\r\n                    onClick={updateProfile}\r\n                    disabled={isDisabled.current || error || loading}\r\n                    >\r\n                    <span>{translate('Update info')}</span>\r\n                    { loading ? <Loader diam={23}/> : ''}\r\n                    </button>\r\n                </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AccountInfo"],"names":["_ref","rows","value","props","_jsx","calculateRows","lineCount","match","length","minRows","Math","min","max","style","resize","AccountInfo","userData","setUserData","useContext","UserContext","config","headers","Authorization","concat","token","loading","setLoading","useState","error","setError","bio","setBio","extention","email_public","setEmailPublic","is_page","setIsPage","isDisabled","useRef","current","trim","translate","TranslationContext","className","children","_jsxs","AutoResizeTextarea","onChange","e","target","maxLength","type","checked","email_verified","_Fragment","Message","removeAlert","variant","response","data","detail","message","id","name","onClick","async","preventDefault","axios","post","newData","profile","page","console","log","localStorage","setItem","JSON","stringify","disabled","Loader","diam"],"sourceRoot":""}