"use strict";(self.webpackChunkfe=self.webpackChunkfe||[]).push([[484],{5484:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var s=a(2791),r=a(8255),n=a(184);const i=(0,s.forwardRef)(((e,t)=>{const a=(0,s.useRef)();(0,s.useImperativeHandle)(t,(()=>({openPopUp:i})));const i=()=>{a.current.showModal()},{translate:c}=(0,s.useContext)(r.O);return(0,n.jsxs)("dialog",{ref:a,onClose:()=>{a.current.close()},className:"rounded border-color-theme bg-white",children:[(0,n.jsx)("p",{className:"",children:c("Are you sure you want to delete your profile picture ?")}),(0,n.jsxs)("form",{method:"dialog",className:"mt-4",children:[(0,n.jsx)("button",{className:"btn btn-outline-danger m-2",onClick:e.removeProfileImage,children:c("Delete")}),(0,n.jsx)("button",{className:"btn btn-outline-dark m-2",children:c("Cancel")})]})]})}));var c=a(5294),o=a(213),l=a(4457),u=a(8592);const d=()=>{const{userData:e,setUserData:t}=(0,s.useContext)(o.S),a={headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(e.token)}},[d,m]=(0,s.useState)(!1),[g,p]=(0,s.useState)(!1),x=(0,s.useRef)(),f=(0,s.useRef)(),h=(0,s.useRef)(),b=(0,s.useRef)(),{translate:j}=(0,s.useContext)(r.O);return(0,n.jsxs)("div",{className:"p-2 w-100 pt-3",children:[(0,n.jsx)(i,{removeProfileImage:async()=>{m(!0);try{const{data:e}=await c.Z.put("/api/settings/remove-profile-image/",{},a);t((t=>{let a={...t,extention:{...t.extention,image:e.image,image_150:e.image_150}};return localStorage.setItem("userData",JSON.stringify(a)),a})),m(!1),p(null)}catch(e){m(!1),p(e),console.log(e)}f.current.reset()},ref:x}),(0,n.jsx)("div",{className:"card h-100",children:(0,n.jsx)("div",{className:"account-settings",children:(0,n.jsxs)("div",{className:"user-profile",children:[(0,n.jsx)("div",{className:"user-avatar text-center",children:(0,n.jsx)("span",{style:{backgroundImage:"url('".concat(e.extention.image,"')")},className:"border border-2 image-in-circle ".concat(d?"blur":""),children:(0,n.jsxs)("button",{ref:b,hidden:"/static/others/user.png"===e.extention.image||"/static/others/page_icon.png"===e.extention.image,style:{right:-25},className:"position-absolute rounded-1 btn btn-outline-danger px-2 py-1 border-0",onClick:()=>{x.current.openPopUp()},children:[" ",(0,n.jsx)("i",{className:"fa-solid fa-trash fa-xl"})," "]})})}),(0,n.jsxs)("div",{className:"text-center d-flex align-items-center justify-content-center fw-bold text-grey mb-3 cursor-pointer mt-2",onClick:()=>(0,l.zp)(e.username),children:[(0,n.jsxs)("h5",{children:["@",e.username]}),e.page&&e.page.is_verified&&(0,n.jsx)("img",{width:"20",src:"/static/others/verified.png"}),(0,n.jsx)("i",{className:"fa-regular fa-copy mx-1"})]}),g&&(0,n.jsx)(u.v,{removeAlert:()=>p(null),variant:"danger",className:"mt-3",children:g.response.data.detail||g.message}),(0,n.jsx)("div",{className:"text-center",children:!d&&(0,n.jsx)("button",{className:"btn btn-outline-success m-1",onClick:()=>{h.current.click()},children:j("Upload image")})}),(0,n.jsx)("form",{ref:f,children:(0,n.jsx)("input",{hidden:!0,type:"file",accept:"image/*",ref:h,onChange:async()=>{m(!0);try{let s=await(0,l.IG)(h.current.files,.5,1080);const{data:r}=await c.Z.put("/api/settings/update-profile-image/",{image:s[0]},a),n={...e,extention:{...e.extention,image:r.image,image_150:r.image_150}};t(n),localStorage.setItem("userData",JSON.stringify(n)),m(!1),p(null)}catch(s){m(!1),p(s),console.log(s)}f.current.reset()}})})]})})})]})}}}]);
//# sourceMappingURL=484.4d555fcd.chunk.js.map