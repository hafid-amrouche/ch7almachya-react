{"version":3,"file":"static/js/231.a5968468.chunk.js","mappings":"6LAOA,MAkFA,EAlFiBA,KACb,MAAM,SAACC,EAAQ,YAAEC,IAAeC,EAAAA,EAAAA,YAAWC,EAAAA,GACrCC,EAAS,CACXC,QAAU,CACR,eAAgB,sBAChBC,cAAc,UAADC,OAAYP,EAASQ,UAGjCC,EAASC,IAAcC,EAAAA,EAAAA,UAASX,EAASY,KAAKH,UAC9CI,EAAMC,IAAWH,EAAAA,EAAAA,UAASX,EAASY,KAAKC,OACxCE,EAASC,IAAcL,EAAAA,EAAAA,WAAS,IAChCM,EAAOC,IAAYP,EAAAA,EAAAA,WAAS,GAC7BQ,GAAcC,EAAAA,EAAAA,SAAO,GA2B3BD,EAAWE,QAAWrB,EAASY,KAAKH,SAAWA,GAAaT,EAASY,KAAKC,MAAQA,EAClF,MAAM,UAACS,IAAapB,EAAAA,EAAAA,YAAWqB,EAAAA,GAC/B,OACIC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,aAAYC,UACvBF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,8BAA6BC,UACxCF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,cAAaC,UACxBC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,MAAKC,SAAA,EAChBF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,mBAAkBC,SAAEJ,EAAU,uBAC5CK,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACIC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,6BAA4BC,SAAA,EACvCC,EAAAA,EAAAA,MAAA,SAAOC,QAAQ,WAAUF,SAAA,CAAEJ,EAAU,aAAa,QAClDE,EAAAA,EAAAA,KAAA,SAAOK,KAAK,OAAMJ,UAAU,eAAeK,YAAaR,EAAU,mBAAoBS,UAAW,GAAIC,MAAOnB,EAAMoB,SAAWC,GAAIpB,EAAQoB,EAAEC,OAAOH,aAEtJL,EAAAA,EAAAA,MAAA,OAAKF,UAAU,6BAA4BC,SAAA,EACvCF,EAAAA,EAAAA,KAAA,SAAAE,SAAO,aACPF,EAAAA,EAAAA,KAAA,SAAOC,UAAU,eAAeK,YAAY,kBAAkBC,UAAW,IAAMC,MAAOvB,GAAW,GAAIwB,SAAUC,GAAGxB,EAAWwB,EAAEC,OAAOH,YAEzIf,IAASO,EAAAA,EAAAA,KAACY,EAAAA,EAAO,CAACC,YAAaA,IAAKnB,EAAS,MAAOoB,QAAQ,SAASb,UAAU,OAAMC,SAAET,EAAMsB,SAASC,KAAKC,QAAUxB,EAAMyB,WAC5HlB,EAAAA,EAAAA,KAAA,OAAKC,UAAU,OAAMC,UACrBF,EAAAA,EAAAA,KAAA,OAAAE,UACIF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,0BAAyBC,UACxCC,EAAAA,EAAAA,MAAA,UACIE,KAAK,SACLc,GAAG,SACH9B,KAAK,SACLY,UAAU,mCACVmB,QAnDVC,UAClBX,EAAEY,iBACF9B,GAAW,GACX,IACE,MAAM,KAACwB,SAAcO,EAAAA,EAAMC,IACzB,6BACA,CACCnC,KAAOA,EACPJ,QAASA,GAEVL,GAEI6C,EAAU,IAAIjD,KAAawC,GACjCvC,EAAYgD,GACZC,aAAaC,QAAQ,WAAYC,KAAKC,UAAUJ,IAChDjC,GAAW,GACXE,EAAS,KAEX,CAAC,MAAMD,GACLD,GAAW,GACXE,EAASD,GACTqC,QAAQC,IAAItC,EACd,GA8B4BuC,SAAUrC,EAAWE,SAAWJ,GAASF,EAAQW,SAAA,EAEjDF,EAAAA,EAAAA,KAAA,QAAAE,SAAOJ,EAAU,iBACfP,IAAWS,EAAAA,EAAAA,KAACiC,EAAAA,EAAM,CAACC,KAAM,yBASjD,C","sources":["Screens/settings/ProfileScreen/PageInfo.js"],"sourcesContent":["import React, { useContext, useRef, useState } from 'react'\r\nimport { UserContext } from '../../../store/UserContext'\r\nimport { Message } from '../../../Components/Message'\r\nimport axios from 'axios'\r\nimport { Loader } from '../../../Components/Loader'\r\nimport { TranslationContext } from '../../../store/TranslationContext'\r\n\r\nconst PageInfo = () => {\r\n    const {userData, setUserData} = useContext(UserContext)\r\n    const config = {\r\n        headers : {\r\n          \"Content-Type\": \"multipart/form-data\",\r\n          Authorization: `Bearer ${userData.token}`\r\n        }\r\n    }\r\n    const [website, setWebsite] = useState(userData.page.website)\r\n    const [name, setName] = useState(userData.page.name)\r\n    const [loading, setLoading] = useState(false)\r\n    const [error, setError] = useState(false)\r\n    const isDisabled  = useRef(false)\r\n\r\n    const updateProfile = async(e)=>{\r\n        e.preventDefault()\r\n        setLoading(true)\r\n        try {\r\n          const {data} = await axios.put(\r\n            '/api/settings/update-page/',\r\n            {\r\n             name : name,\r\n             website: website\r\n            },\r\n            config) \r\n            \r\n          const newData = {...userData, ...data}\r\n          setUserData(newData)\r\n          localStorage.setItem('userData', JSON.stringify(newData))  \r\n          setLoading(false)\r\n          setError(null)\r\n          \r\n        }catch(error){\r\n          setLoading(false)\r\n          setError(error)\r\n          console.log(error)\r\n        }\r\n        \r\n    }\r\n    isDisabled.current = (userData.page.website == website) && (userData.page.name == name)\r\n    const {translate} = useContext(TranslationContext)\r\n    return (\r\n        <div className=\"col-12 p-2\">\r\n            <div className=\"card d-flex flex-column p-3\">\r\n                <div className='flex-grow-1'>\r\n                    <div className=\"row\">\r\n                        <h4 className='mb-3 color-theme'>{translate('Page information')}</h4>\r\n                        <div>\r\n                            <div className=\"form-group col-sm-6 col-12\">\r\n                                <label htmlFor=\"fullName\">{translate('Page Name')}*</label>\r\n                                <input type=\"text\"className=\"form-control\" placeholder={translate(\"Enter page name\")} maxLength={50} value={name} onChange={(e)=>setName(e.target.value)} />\r\n                            </div>\r\n                            <div className='form-group col-sm-6 col-12'>\r\n                                <label>Website</label>\r\n                                <input className='form-control' placeholder='www.website.com' maxLength={100}  value={website || ''} onChange={e=>setWebsite(e.target.value)} />\r\n                            </div>\r\n                            {error && <Message removeAlert={()=> setError(null)} variant='danger' className='mt-3'>{error.response.data.detail || error.message}</Message>}\r\n                            <div className=\"mt-3\">\r\n                            <div>\r\n                                <div className=\"d-flex flex-row-reverse\">\r\n                                <button\r\n                                    type=\"button\"\r\n                                    id=\"submit\"\r\n                                    name=\"submit\"\r\n                                    className=\"btn btn-success m-2 d-flex gap-2\"\r\n                                    onClick={updateProfile}\r\n                                    disabled={isDisabled.current || error || loading}\r\n                                >\r\n                                    <span>{translate('Update info')}</span>\r\n                                    { loading && <Loader diam={23}/>}\r\n                                </button>\r\n                                </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PageInfo"],"names":["PageInfo","userData","setUserData","useContext","UserContext","config","headers","Authorization","concat","token","website","setWebsite","useState","page","name","setName","loading","setLoading","error","setError","isDisabled","useRef","current","translate","TranslationContext","_jsx","className","children","_jsxs","htmlFor","type","placeholder","maxLength","value","onChange","e","target","Message","removeAlert","variant","response","data","detail","message","id","onClick","async","preventDefault","axios","put","newData","localStorage","setItem","JSON","stringify","console","log","disabled","Loader","diam"],"sourceRoot":""}