{"version":3,"file":"static/js/66.767e16c5.chunk.js","mappings":"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","sources":["Screens/settings/ProfileScreen/AccountInfo.js"],"sourcesContent":["import React, { useContext, useRef, useState } from 'react'\r\nimport { UserContext } from '../../../store/UserContext'\r\nimport axios from 'axios'\r\nimport AutoResizeTextarea from '../../../Components/UI/AutoResizeTextarea'\r\nimport { Message } from '../../../Components/Message'\r\nimport { Loader } from '../../../Components/Loader'\r\nimport {TranslationContext} from '../../../store/TranslationContext'\r\n\r\nconst AccountInfo = () => {\r\n    const {userData, setUserData} = useContext(UserContext)\r\n    const config = {\r\n      headers : {\r\n        \"Content-Type\": \"multipart/form-data\",\r\n        Authorization: `Bearer ${userData.token}`\r\n      }\r\n    }\r\n    \r\n    const [loading, setLoading] = useState(false)\r\n    const [error, setError] = useState(false)\r\n\r\n    const [bio, setBio] =  useState(userData.extention.bio)\r\n    const [email_public, setEmailPublic] = useState(userData.extention.email_public)\r\n  \r\n  \r\n    const [is_page, setIsPage] = useState(userData.extention.is_page)\r\n\r\n    \r\n      \r\n   \r\n\r\n    const updateProfile = async(e)=>{\r\n      e.preventDefault()\r\n      setLoading(true)\r\n      try {\r\n        const {data} = await axios.put(\r\n          '/api/settings/update-account/',\r\n          {\r\n            bio :bio.trim(),\r\n            email_public : email_public,\r\n            is_page : is_page,\r\n          },\r\n          config) \r\n        const newData = {\r\n          ...userData, \r\n          extention : {\r\n            ...userData.extention,\r\n            ...data\r\n          }\r\n        } \r\n        console.log(data)\r\n        setUserData(newData)\r\n        localStorage.setItem('userData', JSON.stringify(newData))  \r\n        setLoading(false)\r\n        setError(null)\r\n        \r\n      }catch(error){\r\n        setLoading(false)\r\n        setError(error)\r\n        console.log(error)\r\n      }\r\n      \r\n    }\r\n    const isDisabled = useRef(false)\r\n\r\n    isDisabled.current = (bio.trim() == userData.extention.bio) && \r\n      (is_page == userData.extention.is_page) && \r\n      (email_public == userData.extention.email_public) \r\n    \r\n  const {translate} = useContext(TranslationContext)\r\n  return (\r\n    <div className=\"p-2\">\r\n        <div className=\"card d-flex flex-column p-3\">\r\n            <div className=\"row\">      \r\n                <h4 className='color-theme'>{translate('Account information')}</h4>\r\n\r\n                <div className=\"about text-center p-3\">\r\n                    <h5 className=\"p-1\">{translate('Bio')}</h5>\r\n                    <AutoResizeTextarea className='form-control text-center' onChange={(e)=> setBio(e.target.value)} value={bio} rows={2} maxLength={255}></AutoResizeTextarea>\r\n                </div>\r\n                <div className=\"d-flex flex-wrap\">\r\n                <div  className='align-items-center gap-3 d-flex col-12 col-sm-6 p-3'><p className='mb-0'>{translate('Page account')}</p> <input type='checkBox' checked={is_page} onChange={(e)=>{setIsPage(e.target.checked)}}/></div>\r\n                </div>                  \r\n                {userData.extention.email_verified &&  \r\n                <>\r\n                    <div className=\"d-flex flex-wrap justify-content-center\">\r\n                        <div className='align-items-center gap-3 d-flex col-12 p-3'>{translate('Let people see your email')}<input type='checkBox' checked={email_public} onChange={(e)=>{setEmailPublic(e.target.checked)}}/></div>\r\n                    </div>\r\n                </>\r\n                }\r\n            </div>\r\n            {error && <Message removeAlert={()=> setError(null)} variant='danger' className='mt-3'>{error.response.data.detail || error.message}</Message>}\r\n            <div>\r\n                <div>\r\n                <div className=\"d-flex flex-row-reverse\">\r\n                    <button\r\n                    type=\"button\"\r\n                    id=\"submit\"\r\n                    name=\"submit\"\r\n                    className=\"btn btn-success m-2 d-flex gap-2\"\r\n                    onClick={updateProfile}\r\n                    disabled={isDisabled.current || error || loading}\r\n                    >\r\n                    <span>{translate('Update info')}</span>\r\n                    { loading ? <Loader diam={23}/> : ''}\r\n                    </button>\r\n                </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AccountInfo"],"names":["AccountInfo","userData","setUserData","useContext","UserContext","config","headers","Authorization","concat","token","loading","setLoading","useState","error","setError","bio","setBio","extention","email_public","setEmailPublic","is_page","setIsPage","isDisabled","useRef","current","trim","translate","TranslationContext","_jsx","className","children","_jsxs","AutoResizeTextarea","onChange","e","target","value","rows","maxLength","type","checked","email_verified","_Fragment","Message","removeAlert","variant","response","data","detail","message","id","name","onClick","async","preventDefault","axios","put","newData","console","log","localStorage","setItem","JSON","stringify","disabled","Loader","diam"],"sourceRoot":""}