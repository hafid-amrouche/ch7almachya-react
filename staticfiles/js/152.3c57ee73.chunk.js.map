{"version":3,"file":"static/js/152.3c57ee73.chunk.js","mappings":"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","sources":["Components/UI/CommentModal.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\r\nimport { useRef } from 'react'\r\nimport { hideUnhide } from '../../utils'\r\nimport styled from 'styled-components'\r\nimport { createPortal } from 'react-dom'\r\nimport axios from 'axios'\r\nimport { formatDateTimeInLanguage } from '../../utils'\r\nimport { Message } from '../Message'\r\nimport {Loader} from '../Loader'\r\nimport { UserContext } from '../../store/UserContext'\r\nimport { Link, useParams } from 'react-router-dom'\r\nimport { BrowserContext } from '../../store/BrowserContext'\r\nimport TimeElapsed from '../TimeElapsed'\r\nimport { TranslationContext } from '../../store/TranslationContext'\r\n\r\nconst StyledComponent = styled.dialog`\r\nmax-width: 800px;\r\nwidth: -webkit-fill-available;\r\nbackground-color: transparent;\r\nborder: none;\r\noutline: none;\r\n&>div{\r\n    min-height: 200px;\r\n}\r\n`\r\n\r\nconst CommentModal = ({comment, setComments, setSelectedComment}) =>{\r\n    const [deleteCommentLoading, setDeleteCommentLoading] = useState(false)\r\n    const [errorDeleltingComment, setErrorDeletingComment] = useState(false)\r\n    const username = useParams().username.replace('@', '')\r\n    const ChildRef = useRef()  \r\n    const userData = useContext(UserContext).userData\r\n    const config = {\r\n        headers : {\r\n          \"Content-Type\": \"multipart/form-data\",\r\n          Authorization: `Bearer ${userData.token}`\r\n        }\r\n    }\r\n    const deleteComment = ()=>{\r\n        setDeleteCommentLoading(true)\r\n        axios.post(\r\n            '/api/article/delete-comment/',\r\n            {'comment-id' : comment.id},\r\n            config\r\n            ).then((response)=>{\r\n            setComments((prevState)=>{\r\n                return prevState.filter((c)=>c.id !== comment.id)\r\n            });\r\n            closeDialogHandler()\r\n            setDeleteCommentLoading(false)\r\n        }).catch((error)=>{\r\n            setErrorDeletingComment(error)\r\n            setDeleteCommentLoading(false)\r\n            document.getElementById(`comment-${comment.id}`).setAttribute('hidden', '')\r\n        })\r\n        \r\n    }\r\n    const {togglePopup, setReportData, Right} = useContext(BrowserContext)\r\n    const {language} = useContext(BrowserContext).browserData\r\n    const {translate} = useContext(TranslationContext)\r\n\r\n    const closeDialogHandler=()=>setSelectedComment(null)\r\n\r\n    useEffect(()=>{\r\n        ChildRef.current.showModal()\r\n    }, [ChildRef])\r\n    return createPortal((\r\n        <div className='m-auto'>\r\n            <StyledComponent ref={ChildRef} onClose={closeDialogHandler}>\r\n                { comment && \r\n                    <div className='bg-color-white p-3 border rounded d-flex flex-column'>\r\n                        <div className='d-flex align-items-center'>\r\n                            <Link to={`/@${comment.commenter_username}/`} className='d-flex align-items-center'>\r\n                                <div className='image-in-circle mx-2' style={{ width: 40, backgroundImage : `url('${ comment.commenter_image }')` }} ></div>\r\n                                <div className='d-flex flex-column'>\r\n                                    <span>{ comment.commenter_name.text || comment.commenter_name} {comment.commenter_name.is_verified && <img width='16' src='/static/others/verified.png'/>}</span>\r\n                                    <TimeElapsed className='small text-grey' time={comment.created_at} language={language} />\r\n                                </div>   \r\n                            </Link>\r\n                            \r\n                            <button onClick={ ()=>{hideUnhide(`comment-${comment.id}`, togglePopup)} } className='btn btn-outline-success margin-inline-start-auto '><i className=\"fa-solid fa-ellipsis fa-2xl\" ></i></button>\r\n                        </div>\r\n                        <p className='mt-2 flex-grow-1'>\r\n                            {comment.text}\r\n                        </p>\r\n                        <div className='parameters bg-white border rounded' style={{[Right]: 30, top: 80}} hidden id={`comment-${comment.id}`}>\r\n                            {comment.commenter_id === userData.id || userData.username === username ? \r\n                                (deleteCommentLoading ?\r\n                                    <div className='p-3 d-flex'><span className='mx-1'>{translate('Deleting comment...')}</span></div> :\r\n                                    <div className='p-3' onClick={deleteComment}><i className=\"fa-solid fa-trash px-2 py-1 rounded mx-1\"></i><span className='mx-1'>{translate('Delete comment')}</span></div>\r\n                                ) : ''\r\n                            }\r\n                            <div className='p-3' onClick={()=>{ togglePopup(\"\"); setReportData({type:'Comment', comment_id: comment.id})}}><i className=\"fa-solid fa-exclamation px-3 py-1 rounded  mx-1\"></i><span className='mx-1'>{translate('Report')}</span></div>\r\n                        </div>\r\n                        <div className='mt-4'>\r\n                            <form method=\"dialog\" >\r\n                                    <button className=\"btn btn-outline-success px-4\">{translate('Exit')}</button>\r\n                            </form>\r\n                        </div>\r\n                        { errorDeleltingComment && <Message removeAlert={()=>setErrorDeletingComment(null)} variant='danger' className='mt-5'>{ errorDeleltingComment.message && errorDeleltingComment.response.data.message }</Message> }\r\n                    </div>\r\n                }\r\n            </StyledComponent>\r\n        </div>\r\n    ), document.getElementById('root'))\r\n}\r\n\r\nexport default CommentModal"],"names":["StyledComponent","styled","dialog","_templateObject","_taggedTemplateLiteral","_ref","comment","setComments","setSelectedComment","deleteCommentLoading","setDeleteCommentLoading","useState","errorDeleltingComment","setErrorDeletingComment","username","useParams","replace","ChildRef","useRef","userData","useContext","UserContext","config","headers","Authorization","concat","token","togglePopup","setReportData","Right","BrowserContext","language","browserData","translate","TranslationContext","closeDialogHandler","useEffect","current","showModal","createPortal","_jsx","className","children","ref","onClose","_jsxs","Link","to","commenter_username","style","width","backgroundImage","commenter_image","commenter_name","text","is_verified","src","TimeElapsed","time","created_at","onClick","hideUnhide","id","top","hidden","commenter_id","deleteComment","axios","post","then","response","prevState","filter","c","catch","error","document","getElementById","setAttribute","type","comment_id","method","Message","removeAlert","variant","message","data"],"sourceRoot":""}