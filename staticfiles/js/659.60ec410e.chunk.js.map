{"version":3,"file":"static/js/659.60ec410e.chunk.js","mappings":"6HAiBA,QAfA,SAAsBA,GAA2B,IAA1B,SAAEC,EAAQ,UAAEC,GAAWF,EAC1C,OACIG,EAAAA,EAAAA,KAAA,OAAKD,UAAW,WAAkBA,EAAUD,UACxCE,EAAAA,EAAAA,KAAA,OAAKD,UAAU,wDAAuDD,UAClEE,EAAAA,EAAAA,KAAA,OAAKD,UAAU,gCAA+BD,UAC1CE,EAAAA,EAAAA,KAAA,OAAKD,UAAU,YAAWD,SACrBA,SAOzB,C,oLCHA,MAAMG,EAAaC,EAAAA,GAAOC,KAAIC,IAAAA,GAAAC,EAAAA,EAAAA,GAAA,sCAwH9B,EApHoBC,KAElB,MAAMC,EAAS,CACbC,QAAU,CACR,eAAgB,wBAGdC,GAAWC,EAAAA,EAAAA,MAEXC,EADc,IAAIC,gBAAgBH,EAASI,QACpBC,IAAI,YAE3BC,GAAYC,EAAAA,EAAAA,OAGXC,EAAUC,IAAeC,EAAAA,EAAAA,UAAS,KAClCC,EAAUC,IAAeF,EAAAA,EAAAA,UAAS,IACzC,IAAIG,GAAa,EACbC,EAAoBH,EAASI,OAAS,EACtCP,EAASQ,QAAUF,IACrBD,GAAa,GAKf,MAAOI,EAASC,IAAcR,EAAAA,EAAAA,WAAS,IAChCS,EAAOC,IAAYV,EAAAA,EAAAA,UAAS,OA8B7B,SAACW,EAAQ,YAAEC,IAAgBC,EAAAA,EAAAA,YAAWC,EAAAA,IAC5CC,EAAAA,EAAAA,YAAU,KACJJ,EAASK,IAETpB,EADc,MAAZJ,EACOA,EAEA,IAEb,GACC,CAACmB,EAAUf,EAAUJ,IACxB,MAAM,UAACyB,IAAaJ,EAAAA,EAAAA,YAAWK,EAAAA,IAIzB,SAACC,EAAQ,eAAEC,IAAkBP,EAAAA,EAAAA,YAAWQ,EAAAA,GAK9C,OAJAN,EAAAA,EAAAA,YAAU,KACRI,EAASF,EAAU,SAAQ,MAAAK,OAASL,EAAU,kBAC9CG,EAAeH,EAAU,0CAA0C,GACnE,KAEAM,EAAAA,EAAAA,MAACC,EAAAA,EAAa,CAAC5C,UAAU,cAAaD,SAAA,EAC9BE,EAAAA,EAAAA,KAAA,MAAAF,SAAKsC,EAAU,WACdR,IAAS5B,EAAAA,EAAAA,KAAC4C,EAAAA,EAAO,CAAC7C,UAAU,MAAM8C,YAAaA,IAAKhB,EAAS,MAAQiB,QAAQ,SAAQhD,SAAE8B,KACxFc,EAAAA,EAAAA,MAAA,QAAMK,SApDMC,UACpBC,EAAMC,iBACNvB,GAAW,GACX,IACE,MAQMwB,EAAc,WARGC,EAAAA,EAAMC,KAC7B,mBACA,CACEpC,SAAWA,EAASqC,oBACpBlC,SAAWA,GAEbb,IAEiCgD,KAAMC,UAAU,IAAIC,MACrDC,aAAaC,QAAQ,WAAYC,KAAKC,UAAUV,IAChDpB,EAAYoB,GACZxB,GAAW,GACXE,EAAS,MACTd,EAAUJ,GAAY,qBAExB,CAAE,MAAOiB,GAEPC,EAASD,EAAMkC,SAASP,KAAKQ,QAAUnC,EAAMoC,SAC7CrC,GAAW,EAEb,GA4BuC5B,UAAU,qBAAoBD,SAAA,EAGzDE,EAAAA,EAAAA,KAAA,OAAKD,UAAU,kBAAiBD,UAC5BE,EAAAA,EAAAA,KAAA,SACID,UAAU,eACVkE,KAAK,WACLC,YAAa9B,EAAU,YACvB+B,MAAOlD,EACPmD,SAAWC,GAAMnD,EAAYmD,EAAEC,OAAOH,YAM9CnE,EAAAA,EAAAA,KAAA,OAAKD,UAAU,kBAAiBD,UAC5BE,EAAAA,EAAAA,KAAA,SACID,UAAU,eACVkE,KAAK,WACLC,YAAa9B,EAAU,YACvB+B,MAAO/C,EACPgD,SAAWC,GAAMhD,EAAYgD,EAAEC,OAAOH,YAK9CzB,EAAAA,EAAAA,MAAA,UAAQuB,KAAK,SAASM,SAAUjD,GAAcI,EAAS3B,UAAU,sDAAqDD,SAAA,EACpHE,EAAAA,EAAAA,KAAA,QAAAF,SAAOsC,EAAU,WAAgB,IAAGV,GAAU1B,EAAAA,EAAAA,KAACC,EAAU,CAAAH,UAACE,EAAAA,EAAAA,KAACwE,EAAAA,EAAM,CAACC,KAAM,OAAqB,UAGnGzE,EAAAA,EAAAA,KAAC0E,EAAAA,GAAI,CAAC3E,UAAU,cAAc4E,GAAG,oBAAmB7E,SAAEsC,EAAU,uBAChEpC,EAAAA,EAAAA,KAAA,UACAA,EAAAA,EAAAA,KAAC0E,EAAAA,GAAI,CAAC3E,UAAU,iCAAiC4E,GAAiB,OAAbhE,EAAoB,uBAAyBA,EAAW,aAAab,UAAEE,EAAAA,EAAAA,KAAA,UAAQD,UAAU,gCAA+BD,SAAEsC,EAAU,2BAEjL,C","sources":["Components/FormContainer.js","Screens/LoginScreen.js"],"sourcesContent":["import React from 'react'\r\n\r\nfunction FormContainer({ children, className }) {\r\n    return (\r\n        <div className={'mx-auto' + ' ' + className}>\r\n            <div className='bg-color-white p-md-4 p-3 px-md-3 rounded border mx-3' >\r\n                <div className=\"row justify-content-md-center\">\r\n                    <div className='col-xs-12'>\r\n                        {children}\r\n                    </div>\r\n                </div>\r\n            </div>   \r\n        </div>\r\n        \r\n    )\r\n}\r\n\r\nexport default FormContainer\r\n","import { Link, useLocation, useNavigate } from 'react-router-dom'\r\nimport { Loader } from '../Components/Loader'\r\nimport { Message } from '../Components/Message'\r\nimport FormContainer from '../Components/FormContainer'\r\nimport { useContext, useState, useEffect } from 'react'\r\nimport axios from 'axios'\r\nimport { UserContext } from '../store/UserContext'\r\nimport styled from 'styled-components'\r\nimport { BrowserContext } from '../store/BrowserContext'\r\nimport { TranslationContext } from '../store/TranslationContext'\r\n\r\n\r\nconst StyledSpan = styled.span`\r\nmargin-inline-start: 10px;\r\n`\r\n\r\nconst LoginScreen = () => {\r\n  // get the redirect value\r\n  const config = {\r\n    headers : {\r\n      \"Content-Type\": \"multipart/form-data\",\r\n    }\r\n  }\r\n  const location = useLocation()\r\n  const queryParams = new URLSearchParams(location.search);\r\n  const redirect = queryParams.get('redirect');\r\n\r\n  const navigate  = useNavigate()\r\n  \r\n  // login states\r\n  const [username, setUsername] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  let isDisabled = true\r\n  let passwordCondition = password.length > 7\r\n  if (username.trim() && passwordCondition ){\r\n    isDisabled = false\r\n  }\r\n\r\n  //////////////////\r\n  // Login submition handling\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const submitHandler = async(event)=>{\r\n    event.preventDefault()\r\n    setLoading(true)\r\n    try {    \r\n      const response = await axios.post(\r\n      '/api/user/login/',\r\n      {\r\n        username : username.toLocaleLowerCase(),\r\n        password : password\r\n      },\r\n      config\r\n      );\r\n      const newUserData = {...response.data, loginDate:new Date()}\r\n      localStorage.setItem('userData', JSON.stringify(newUserData))\r\n      setUserData(newUserData)\r\n      setLoading(false)\r\n      setError(null)\r\n      navigate( redirect || '/settings/profile/')\r\n\r\n    } catch (error) {\r\n      // Handle errors\r\n      setError(error.response.data.detail || error.message)\r\n      setLoading(false)\r\n\r\n    }\r\n  }\r\n  \r\n  /////////////////////////\r\n  // refresh component when userData is updated\r\n  const {userData, setUserData} =  useContext(UserContext)\r\n  useEffect(()=>{\r\n    if (userData.id){\r\n      if (redirect != null){\r\n        navigate(redirect)\r\n      }else{\r\n        navigate('/')\r\n      }\r\n    }\r\n  }, [userData, navigate, redirect])\r\n  const {translate} = useContext(TranslationContext)\r\n\r\n  ////////////\r\n  //\r\n  const {setTitle, setDescription} = useContext(BrowserContext)\r\n  useEffect(()=>{\r\n    setTitle(translate('Login') + ` | ${translate('Ch7al Machya')}`)\r\n    setDescription(translate('Login to your account at Ch7al machya.'))\r\n  },[])\r\n  return (\r\n    <FormContainer className='mt-5 mw-700'>\r\n            <h1>{translate('Login')}</h1>\r\n            {error && <Message className='m-3' removeAlert={()=>(setError(null))} variant='danger'>{error}</Message>}\r\n            <form onSubmit={submitHandler} className='d-flex flex-column'>\r\n                \r\n\r\n                <div className='my-3 form-group'>\r\n                    <input\r\n                        className='form-control'\r\n                        type='username'\r\n                        placeholder={translate('Username')}\r\n                        value={username}\r\n                        onChange={(e) => setUsername(e.target.value)}\r\n                    >\r\n                    </input>\r\n                </div>\r\n\r\n\r\n                <div className='mb-3 form-group'>\r\n                    <input\r\n                        className='form-control'\r\n                        type='password'\r\n                        placeholder={translate('Password')}\r\n                        value={password}\r\n                        onChange={(e) => setPassword(e.target.value)}\r\n                    >\r\n                    </input>\r\n                </div>\r\n\r\n                <button type='submit' disabled={isDisabled || loading} className='w-fit-content align-self-end d-flex btn btn-success'>\r\n                  <span>{translate('Login')}</span> { loading ? <StyledSpan><Loader diam={23}/></StyledSpan> : ''}\r\n                </button>\r\n            </form>\r\n            <Link className='color-theme' to='/forgot-password/'>{translate('Forgot password?')}</Link>\r\n            <hr/>\r\n            <Link className='col-12 col-sm-6 d-block m-auto' to={redirect !== null ? '/register/?redirect=' + redirect : '/register/'} ><button className='btn btn-outline-success w-100'>{translate('Create an account')}</button></Link>\r\n\r\n    </FormContainer>\r\n  )\r\n}\r\n\r\nexport default LoginScreen"],"names":["_ref","children","className","_jsx","StyledSpan","styled","span","_templateObject","_taggedTemplateLiteral","LoginScreen","config","headers","location","useLocation","redirect","URLSearchParams","search","get","navigate","useNavigate","username","setUsername","useState","password","setPassword","isDisabled","passwordCondition","length","trim","loading","setLoading","error","setError","userData","setUserData","useContext","UserContext","useEffect","id","translate","TranslationContext","setTitle","setDescription","BrowserContext","concat","_jsxs","FormContainer","Message","removeAlert","variant","onSubmit","async","event","preventDefault","newUserData","axios","post","toLocaleLowerCase","data","loginDate","Date","localStorage","setItem","JSON","stringify","response","detail","message","type","placeholder","value","onChange","e","target","disabled","Loader","diam","Link","to"],"sourceRoot":""}