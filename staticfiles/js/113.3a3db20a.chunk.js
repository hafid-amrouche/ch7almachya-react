"use strict";(self.webpackChunkfe=self.webpackChunkfe||[]).push([[113],{9785:(e,s,a)=>{a.d(s,{Z:()=>t});a(2791);var r=a(184);const t=function(e){let{children:s,className:a}=e;return(0,r.jsx)("div",{className:"mx-auto "+a,children:(0,r.jsx)("div",{className:"bg-color-white p-md-4 p-3 px-md-3 rounded border mx-3",children:(0,r.jsx)("div",{className:"row justify-content-md-center",children:(0,r.jsx)("div",{className:"col-xs-12",children:s})})})})}},5113:(e,s,a)=>{a.r(s),a.d(s,{default:()=>j});var r,t=a(168),c=a(7689),l=a(1087),n=a(2014),o=a(8592),i=a(9785),d=a(2791),u=a(5294),m=a(213),h=a(5867),f=a(4457),x=a(2046),v=a(8255),g=a(184);const p=h.ZP.span(r||(r=(0,t.Z)(["\nmargin-inline-start: 10px;\n"]))),j=()=>{const[e,s]=(0,d.useState)(1),[a,r]=(0,d.useState)(!0),[t,h]=(0,d.useState)(!0),j=(0,c.TH)(),N=(0,c.s0)(),L=new URLSearchParams(j.search).get("redirect"),[b,w]=(0,d.useState)(""),[y,C]=(0,d.useState)(""),[S,R]=(0,d.useState)(""),[D,k]=(0,d.useState)(""),[T,P]=(0,d.useState)(""),U=(0,d.useRef)(),H=(0,d.useRef)(),Z=(0,d.useRef)(),M=(0,d.useRef)(),_=(0,d.useRef)(),A=(0,d.useRef)(),[E,F]=(0,d.useState)(!1),[O,B]=(0,d.useState)(null),{userData:G,setUserData:I}=(0,d.useContext)(m.S);(0,d.useEffect)((()=>{G.id&&N(null!=L?L:"/")}),[G,N,L]);const J=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";r(!0),B(null),""===e?(U.current.classList.add("error"),U.current.classList.remove("success"),H.current.classList.remove("error")):(U.current.classList.add("success"),U.current.classList.remove("error"),""===s?(H.current.classList.add("error"),H.current.classList.remove("success"),M.current.classList.remove("error")):(H.current.classList.add("success"),H.current.classList.remove("error"),a.length<8?(M.current.classList.add("error"),M.current.classList.remove("success"),_.current.classList.remove("error"),_.current.classList.remove("success")):(M.current.classList.add("success"),M.current.classList.remove("error"),a!==t?(M.current.classList.add("error"),_.current.classList.add("error"),_.current.classList.remove("success")):(_.current.classList.add("success"),_.current.classList.remove("error"),r(!1)))))},{Right:Q,Left:V}=(0,d.useContext)(x._),{translate:q}=(0,d.useContext)(v.O),{setTitle:z,setDescription:K}=(0,d.useContext)(x._);return(0,d.useEffect)((()=>{z(q("Register")+" | ".concat(q("Ch7al Machya"))),K(q("Register with us at ch7al machya and start selling vehicles."))}),[]),(0,g.jsxs)(i.Z,{className:"mt-5 mw-700",children:[(0,g.jsx)("h1",{children:q("Register")}),O&&(0,g.jsx)(o.v,{removeAlert:()=>B(null),variant:"danger",className:"m-3",children:O}),(0,g.jsxs)("form",{className:"",children:[(0,g.jsxs)("div",{className:"".concat(2===e?"d-none":"d-flex"," flex-column"),children:[(0,g.jsxs)("div",{className:"d-flex gap-2",hidden:2===e?"hidden":"",children:[(0,g.jsxs)("div",{ref:U,className:"mt-3 flex-grow-1 form-group",children:[(0,g.jsx)("label",{className:"form-label",children:q("First Name")}),(0,g.jsx)("input",{type:"text",placeholder:q("First Name"),value:b,onChange:e=>{let s=e.target.value;(0,f.AH)(s)&&(w(s),J(s,y,D,T))},maxLength:50,className:"form-control"})]}),(0,g.jsxs)("div",{ref:H,className:"mt-3 flex-grow-1 form-group",children:[(0,g.jsx)("label",{className:"form-label",children:q("Last Name")}),(0,g.jsx)("input",{type:"text",placeholder:q("Last Name"),value:y,maxLength:50,onChange:e=>{let s=e.target.value;(0,f.AH)(s)&&(C(s),J(b,s,D,T))},className:"form-control"})]})]}),(0,g.jsxs)("div",{className:"my-3 form-group",ref:M,children:[(0,g.jsxs)("label",{className:"form-label",children:[q("Password")," ",0<D.length&&D.length<8?"(".concat(q("Password must have at least 8 characters"),")"):""]}),(0,g.jsx)("input",{className:"form-control",type:"password",placeholder:q("Password"),value:D,onChange:e=>{let s=e.target.value;k(s),J(b,y,s,T)}})]}),(0,g.jsxs)("div",{className:"mb-3 form-group",ref:_,children:[(0,g.jsxs)("label",{className:"form-label",children:[q("Confirm Password")," ",D.length>=8&&D!==T?"(".concat(q("Passwords do not match"),")"):""]}),(0,g.jsx)("input",{type:"password",placeholder:q("Confirm Password"),value:T,onChange:e=>{let s=e.target.value;P(s),J(b,y,D,s)},className:"form-control"})]}),(0,g.jsx)("button",{type:"submit",onClick:e=>{e.preventDefault(),s(2)},disabled:a,className:"w-fit-content align-self-end d-flex btn btn-success",children:(0,g.jsxs)("span",{children:[q("Next")," ",(0,g.jsx)("i",{className:"fa-solid fa-chevron-".concat(Q)})]})})]}),(0,g.jsxs)("div",{className:"".concat(1===e?"d-none":"d-flex"," flex-column"),hidden:1===e,children:[(0,g.jsxs)("div",{className:"my-3 form-group",ref:Z,children:[(0,g.jsx)("label",{className:"form-label",children:q("Username (Latin letters only)")}),(0,g.jsx)("input",{className:"form-control",type:"username",placeholder:q("Username"),value:S,onChange:e=>{let s=e.target.value;(0,f.VT)(s)&&(B(null),R(s),u.Z.get("/api/checkUsername/?username=".concat(s)).then((e=>{""===e.data[1]?(Z.current.classList.remove("success"),Z.current.classList.add("error"),h(!0),A.current.innerHTML="Username field cannot be empty"):e.data[0]?(Z.current.classList.add("success"),Z.current.classList.remove("error"),h(!1),A.current.innerHTML=""):(Z.current.classList.add("error"),Z.current.classList.remove("success"),h(!0),A.current.innerHTML="This username is taken")})).catch((e=>{h(!0),A.current.innerHTML="BAD REQUEST 400",B(e.response.data.detail||e.message)})))},maxLength:50}),(0,g.jsx)("label",{className:"mt-2",ref:A})]}),(0,g.jsxs)("div",{className:"d-flex gap-3 justify-content-between",children:[(0,g.jsx)("button",{type:"submit",className:"w-fit-content align-self-end d-flex btn btn-success",onClick:e=>{e.preventDefault(),s(1)},children:(0,g.jsxs)("span",{children:[(0,g.jsx)("i",{className:"fa-solid fa-chevron-".concat(V)})," ",q("Go back")]})}),(0,g.jsxs)("button",{type:"submit",disabled:t,onClick:async e=>{e.preventDefault(),F(!0);try{const e={...(await u.Z.post("/api/user/register/",{first_name:b,last_name:y,password:D,username:S,confirm_password:T},{headers:{"Content-Type":"multipart/form-data"}})).data,loginDate:new Date};localStorage.setItem("userData",JSON.stringify(e)),I(e),F(!1),B(null),N(L||"/settings/profile/")}catch(O){B(O.response.data.detail||O.message),F(!1),console.log(O)}},className:"w-fit-content align-self-end d-flex btn btn-success",children:[(0,g.jsx)("span",{children:q("Register")})," ",E?(0,g.jsx)(p,{children:(0,g.jsx)(n.a,{diam:23})}):""]})]})]})]}),(0,g.jsx)("div",{className:"row",children:(0,g.jsxs)("div",{className:"mt-3 col",children:[q("Do you have an account?")," ",(0,g.jsx)(l.rU,{className:"color-theme",to:null!==L?"/login/?redirect="+L:"/login/",children:q("Login")})]})})]})}}}]);
//# sourceMappingURL=113.3a3db20a.chunk.js.map